<% if @league.archived then %>
    <div>
        <strong>This league has been archived</strong>
    </div>
<% end %>

<% if @league.winner then %>
    <div>
        <strong>This league has is now closed</strong>
    </div>
<% end %>

<h1><%= @league.name %></h1>
<h2>Owned by <%= @league.owner.name %></h2>

<div>
    <%= link_to "Archive League", league_archive_path(@league) %>
    <%= link_to "Close League", league_close_path(@league) %>
</div>

<hr />

<% if @league.winner %>
<div>
    <h1><%= @league.winner.name %> is the winner</h1>
</div>
<% end %>

<h3>LeaderBoard</h3>

<ul>
    <% @league.scores.each do |score| %> 
        <li><%= score[:user][:name] %> - <%= score[:total] %></li>
    <% end %>
</ul>

<h3>Games</h3>

<div>
    <%= link_to "Create a new game", new_league_game_path(@league) %>
</div>

<ul>
    <% @league.games.each do |game| %>
        <li>
            <%= game.player1.name %> VS <%= game.player2.name %> - <%= link_to "Trash game", league_game_path(@league, game), method: :delete %> |
            <% if game.winner %>
                <strong><%= game.winner.name %> Won!</strong>
            <% else %>
                <strong> Game has not been played yet </strong>            
            <% end %>
        </li>
    <% end %>
</ul>